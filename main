#!/bin/bash 

main="main.cpp"
dir=""

case "$1" in
  cpp)
    dir=cpp_projects
    ;;
  java)
    dir=java_projects
    ;;
  php)
    dir=php_projects
    ;;
  vue)
    dir=web_projects
    ;;
  *)
    echo "Argumento no vÃ¡lido. Los posibles valores son: cpp, java, php o vue."
    exit 1
    ;;
esac

uri="$HOME/git/${dir}" 

dirs=`ls $uri`

i=1

if [ $# -eq 2 ]; then
  num=$2
else
  for dir in $dirs; do
    if [ -d "$uri/$dir" ]; then
      echo "$i- $dir"
      ((i++))
    fi
  done
  read -p ">> " num
fi

if [ $num -eq 0 ]; then
  exit 0
fi

dir=$(echo "$dirs" | sed "${num}q;d")
dir=$(echo "$dir" | sed 's/[0-9]\+- //')

echo $dir

cd $uri/$dir

if [[ -f .nvim ]]; then
  nvim -S .nvim
else
  touch .nvim
  nvim 
fi
